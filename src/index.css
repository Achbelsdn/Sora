@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@300;400;500;700&family=Syne:wght@400;500;600;700;800&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --bg:       #f7f4ef;
  --bg2:      #f0ece4;
  --surface:  #ffffff;
  --s2:       #f9f7f3;
  --s3:       #f2ede5;
  --border:   #e8e0d4;
  --border2:  #d8cfc0;

  --ink:      #1a0e08;
  --ink2:     #4a3728;
  --ink3:     #9a8070;
  --ink4:     #c5b8a8;

  --red:      #8b1a1a;
  --red2:     #6b0f0f;
  --red3:     #a02020;
  --red-s:    rgba(139,26,26,0.08);
  --red-m:    rgba(139,26,26,0.15);

  --green:    #1a7a4a;
  --green-s:  rgba(26,122,74,0.1);
  --blue:     #1a4a8b;
  --blue-s:   rgba(26,74,139,0.1);
  --amber:    #7a4a0a;
  --amber-s:  rgba(122,74,10,0.1);

  --shadow-sm: 0 1px 4px rgba(26,14,8,0.06), 0 2px 8px rgba(26,14,8,0.04);
  --shadow:    0 2px 12px rgba(26,14,8,0.08), 0 4px 24px rgba(26,14,8,0.06);
  --shadow-lg: 0 8px 32px rgba(26,14,8,0.12), 0 16px 48px rgba(26,14,8,0.06);

  --f-head: 'Syne', sans-serif;
  --f-body: 'Plus Jakarta Sans', sans-serif;
  --f-mono: 'JetBrains Mono', monospace;
  --r: 12px;
  --r-lg: 20px;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html, body, #root { height: 100%; overflow: hidden; }

body {
  background: var(--bg);
  color: var(--ink);
  font-family: var(--f-body);
  font-size: 14px;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
}

::selection { background: rgba(139,26,26,0.2); color: var(--ink); }
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: var(--bg); }
::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }
::-webkit-scrollbar-thumb:hover { background: var(--red); }

/* ── Subtle texture ─────────────────────────────── */
.grain::after {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.025'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 9999;
}

/* ── Cards ──────────────────────────────────────── */
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r);
  box-shadow: var(--shadow-sm);
}
.card-lg {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  box-shadow: var(--shadow);
}
.card-float {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  box-shadow: var(--shadow-lg);
}
.card-red {
  background: var(--red-s);
  border: 1px solid var(--red-m);
  border-radius: var(--r);
}

/* ── Chips ──────────────────────────────────────── */
.chip { display: inline-flex; align-items: center; padding: 2px 10px; border-radius: 20px; font-size: 11px; font-family: var(--f-mono); font-weight: 500; border: 1px solid; }
.chip-red   { background: var(--red-s);   border-color: var(--red-m);    color: var(--red); }
.chip-green { background: var(--green-s); border-color: rgba(26,122,74,0.25); color: var(--green); }
.chip-blue  { background: var(--blue-s);  border-color: rgba(26,74,139,0.25); color: var(--blue); }
.chip-amber { background: var(--amber-s); border-color: rgba(122,74,10,0.25); color: var(--amber); }
.chip-ink   { background: rgba(26,14,8,0.06); border-color: var(--border2); color: var(--ink2); }

/* ── Buttons ─────────────────────────────────────── */
.btn-primary {
  background: var(--ink);
  color: white;
  border: none;
  border-radius: var(--r);
  padding: 10px 20px;
  font-family: var(--f-body);
  font-weight: 600;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.15s;
}
.btn-primary:hover { background: var(--red2); transform: translateY(-1px); box-shadow: var(--shadow); }
.btn-primary:active:not(:disabled) { transform: translateY(1px) scale(0.97); box-shadow: none; filter: brightness(0.9); }
.btn-primary:disabled { opacity: 0.4; cursor: default; transform: none; }

.btn-red {
  background: var(--red);
  color: white;
  border: none;
  border-radius: var(--r);
  padding: 10px 20px;
  font-family: var(--f-body);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s;
}
.btn-red:hover { background: var(--red2); transform: translateY(-1px); box-shadow: var(--shadow); }
.btn-red:active:not(:disabled) { transform: translateY(1px) scale(0.97); box-shadow: none; filter: brightness(0.9); }
.btn-red:disabled { opacity: 0.4; cursor: default; transform: none; }

.btn-ghost {
  background: transparent;
  color: var(--ink2);
  border: 1px solid var(--border2);
  border-radius: var(--r);
  padding: 9px 18px;
  font-family: var(--f-body);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}
.btn-ghost:hover { background: var(--s3); border-color: var(--ink4); }
.btn-ghost:active:not(:disabled) { transform: scale(0.97); filter: brightness(0.95); }

/* ── Animations ──────────────────────────────────── */
@keyframes fade-up   { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:translateY(0)} }
@keyframes fade-in   { from{opacity:0} to{opacity:1} }
@keyframes spin      { to{transform:rotate(360deg)} }
@keyframes dot-pulse { 0%,100%{transform:scale(1);opacity:1} 50%{transform:scale(0.7);opacity:0.5} }
@keyframes shimmer   { 0%{background-position:-200% center} 100%{background-position:200% center} }
@keyframes bar-fill  { from{width:0} to{width:100%} }
@keyframes slide-in  { from{opacity:0;transform:translateX(-8px)} to{opacity:1;transform:translateX(0)} }
@keyframes float     { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-4px)} }

.anim-up    { animation: fade-up 0.25s ease-out forwards; }
.anim-in    { animation: fade-in 0.2s ease-out forwards; }
.anim-slide { animation: slide-in 0.3s ease-out forwards; }
.anim-float { animation: float 3s ease-in-out infinite; }
.anim-spin  { animation: spin 0.9s linear infinite; }

.shimmer-text {
  background: linear-gradient(90deg, var(--ink2) 25%, var(--ink) 50%, var(--ink2) 75%);
  background-size: 200% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: shimmer 2s linear infinite;
}

/* ── Dot pulse for agents ────────────────────────── */
.dot-live { width: 7px; height: 7px; border-radius: 50%; background: var(--green); animation: dot-pulse 1.4s ease-in-out infinite; }
.dot-idle { width: 7px; height: 7px; border-radius: 50%; background: var(--border2); }
.dot-done { width: 7px; height: 7px; border-radius: 50%; background: var(--green); }
.dot-err  { width: 7px; height: 7px; border-radius: 50%; background: var(--red); }

/* ── Input ───────────────────────────────────────── */
.sara-input {
  background: var(--surface);
  border: 1.5px solid var(--border);
  border-radius: var(--r);
  padding: 10px 16px;
  font-family: var(--f-body);
  font-size: 14px;
  color: var(--ink);
  outline: none;
  transition: border-color 0.15s;
  width: 100%;
}
.sara-input:focus { border-color: var(--red); box-shadow: 0 0 0 3px rgba(139,26,26,0.08); }
.sara-input::placeholder { color: var(--ink4); }

/* ── Markdown ────────────────────────────────────── */
.sara-md { font-family: var(--f-body); color: var(--ink); line-height: 1.75; }
.sara-md h1 { font-family: var(--f-head); font-size: 1.5rem; font-weight: 700; color: var(--red); margin: 1.2rem 0 0.5rem; }
.sara-md h2 { font-family: var(--f-head); font-size: 1.15rem; font-weight: 600; color: var(--ink); margin: 1rem 0 0.4rem; }
.sara-md h3 { font-size: 1rem; font-weight: 600; color: var(--ink2); margin: 0.8rem 0 0.3rem; }
.sara-md p  { margin: 0.5rem 0; color: var(--ink2); }
.sara-md code { font-family: var(--f-mono); font-size: 0.82em; background: var(--red-s); border: 1px solid var(--red-m); padding: 0.1em 0.35em; border-radius: 4px; color: var(--red2); }
.sara-md pre { background: var(--ink); border-radius: var(--r); padding: 1.2rem 1.4rem; overflow-x: auto; margin: 0.8rem 0; }
.sara-md pre code { background: none; border: none; padding: 0; color: #d4f0c0; font-size: 0.84em; }
.sara-md ul, .sara-md ol { padding-left: 1.4rem; margin: 0.5rem 0; }
.sara-md li { margin: 0.25rem 0; color: var(--ink2); }
.sara-md li::marker { color: var(--red); }
.sara-md strong { color: var(--ink); font-weight: 600; }
.sara-md a { color: var(--red); }
.sara-md blockquote { border-left: 3px solid var(--border2); margin: 0.5rem 0; padding: 0.2rem 0 0.2rem 1rem; color: var(--ink3); }
.sara-md hr { border: none; border-top: 1px solid var(--border); margin: 1rem 0; }
.sara-md table { width: 100%; border-collapse: collapse; margin: 0.8rem 0; font-size: 0.9em; }
.sara-md th { background: var(--s3); color: var(--ink); text-align: left; padding: 0.45rem 0.8rem; border: 1px solid var(--border); font-weight: 600; font-size: 0.85em; }
.sara-md td { padding: 0.35rem 0.8rem; border: 1px solid var(--border); color: var(--ink2); }

/* ── Market card ─────────────────────────────────── */
.market-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  box-shadow: var(--shadow-sm);
  transition: all 0.2s;
  cursor: pointer;
  overflow: hidden;
}
.market-card:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-lg);
  border-color: var(--red);
}

/* ── Nav item ────────────────────────────────────── */
.nav-item { padding: 8px 12px; border-radius: 8px; cursor: pointer; transition: all 0.15s; font-weight: 500; font-size: 14px; display: flex; align-items: center; gap: 8px; }
.nav-item:hover  { background: var(--s3); }
.nav-item.active { background: var(--red-s); color: var(--red); }
.nav-item.active svg { color: var(--red); }
/* ═══════════════════════════════════════════════════════════════════════════
   LIVE AGENT STREAMING
   ═══════════════════════════════════════════════════════════════════════════ */
@keyframes type-cursor {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

.agent-stream-text {
  font-family: var(--f-mono);
  font-size: 12px;
  line-height: 1.6;
  color: var(--ink2);
  white-space: pre-wrap;
  word-break: break-word;
}

.agent-dots-cluster {
  display: flex;
  align-items: center;
}
.agent-dots-cluster > div {
  transition: all 0.3s ease;
}
